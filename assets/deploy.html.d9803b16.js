import{r as p,o,a as c,b as n,d as a,w as l,F as r,e as s,c as u}from"./app.47f294cb.js";import{_ as i}from"./plugin-vue_export-helper.21dcd24c.js";const k={},b=n("h1",{id:"\u5FEB\u901F\u90E8\u7F72",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u5FEB\u901F\u90E8\u7F72","aria-hidden":"true"},"#"),s(" \u5FEB\u901F\u90E8\u7F72")],-1),m={class:"custom-container tip"},d=n("p",{class:"custom-container-title"},"TIP",-1),y=s("\u5728\u5F00\u59CB\u4E4B\u524D\uFF0C\u8BF7\u5148\u9605\u8BFB"),_=s(" Anni \u7B80\u4ECB"),h=s("\u3002"),g=n("h2",{id:"\u521B\u5EFA\u5143\u6570\u636E\u4ED3\u5E93",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u521B\u5EFA\u5143\u6570\u636E\u4ED3\u5E93","aria-hidden":"true"},"#"),s(" \u521B\u5EFA\u5143\u6570\u636E\u4ED3\u5E93")],-1),v=n("p",null,"\u5143\u6570\u636E\u4ED3\u5E93\u672C\u8D28\u4E0A\u662F\u4E00\u4E2A Git \u4ED3\u5E93\uFF0C\u53EF\u4EE5\u5B58\u653E\u5728\u4EFB\u610F\u652F\u6301 Git \u7684\u6258\u7BA1\u5E73\u53F0\u3002\u6211\u4EEC\u63A8\u8350\u4F7F\u7528 GitHub \u3002",-1),f=s("\u6700\u7B80\u5355\u7684\u65B9\u5F0F\u662F\u76F4\u63A5 Fork "),x={href:"https://github.com/ProjectAnni/repo",target:"_blank",rel:"noopener noreferrer"},q=s("\u5B98\u65B9\u7684\u5143\u6570\u636E\u4ED3\u5E93"),A=s(" \uFF0C\u4E4B\u540E\u4FEE\u6539 "),P=n("code",null,"repo.toml",-1),R=s(" \u4E2D\u7684\u90E8\u5206\u4FE1\u606F\u5373\u53EF\u3002"),S=s("\u4E5F\u53EF\u4EE5\u9009\u62E9\u81EA\u5DF1\u91CD\u65B0\u521B\u5EFA\u5143\u6570\u636E\u4ED3\u5E93\uFF0C\u683C\u5F0F\u53EF\u53C2\u8003\u5B98\u65B9\u5143\u6570\u636E\u4ED3\u5E93\u3002\u8BE6\u7EC6\u7684 Anni \u5143\u6570\u636E\u4ED3\u5E93\u6807\u51C6\u53EF\u53C2\u8003"),D={href:"https://book.anni.rs/02.metadata-repository/00.readme.html",target:"_blank",rel:"noopener noreferrer"},j=s("book \u7684\u76F8\u5173\u7AE0\u8282"),E=s("\u3002"),L=u(`<h2 id="\u90E8\u7F72-annil" tabindex="-1"><a class="header-anchor" href="#\u90E8\u7F72-annil" aria-hidden="true">#</a> \u90E8\u7F72 annil</h2><p>\u6211\u4EEC\u63A8\u8350\u901A\u8FC7 Docker \u90E8\u7F72 annil \u670D\u52A1\uFF0C\u53C2\u8003\u7684 <code>docker-compose.yml</code> \u5982\u4E0B\uFF1A</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&quot;3&quot;</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">annil</span><span class="token punctuation">:</span>
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> annil
    <span class="token key atrule">image</span><span class="token punctuation">:</span> ghcr.io/projectanni/annil<span class="token punctuation">:</span>latest
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 8081<span class="token punctuation">:</span>80/tcp <span class="token comment"># \u53EF\u5C06 8081 \u4FEE\u6539\u4E3A\u5176\u4ED6\u7AEF\u53E3</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ./data<span class="token punctuation">:</span>/app/data
      <span class="token punctuation">-</span> /path/to/audio/library<span class="token punctuation">:</span>/library <span class="token comment"># \u5C06 /path/to/audio/library \u4FEE\u6539\u4E3A\u97F3\u9891\u6587\u4EF6\u5B58\u653E\u76EE\u5F55</span>
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> unless<span class="token punctuation">-</span>stopped
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>\u8FD0\u884C <code>docker-compose up -d</code> \u4E4B\u540E\uFF0C\u6211\u4EEC\u9700\u8981\u4FEE\u6539\u4F4D\u4E8E <code>data/config.toml</code> \u7684 <code>annil</code> \u7684\u914D\u7F6E\u6587\u4EF6\uFF1A</p><div class="language-toml ext-toml line-numbers-mode"><pre class="language-toml"><code><span class="token punctuation">[</span><span class="token table class-name">server</span><span class="token punctuation">]</span>
<span class="token key property">name</span> <span class="token punctuation">=</span> <span class="token string">&quot;My Anni Library&quot;</span>
<span class="token key property">listen</span> <span class="token punctuation">=</span> <span class="token string">&quot;0.0.0.0:80&quot;</span>

<span class="token key property">hmac-key</span> <span class="token punctuation">=</span> <span class="token string">&quot;d31d03ba-8fde-4605-999e-b281be766141&quot;</span> <span class="token comment"># \u968F\u673A\u751F\u6210\uFF0C\u4E0D\u7528\u4FEE\u6539\uFF0C\u4E0B\u540C</span>
<span class="token key property">share-key</span> <span class="token punctuation">=</span> <span class="token string">&quot;5dea211d-da50-44b2-8564-84fe99731fa5&quot;</span>
<span class="token key property">share-key-id</span> <span class="token punctuation">=</span> <span class="token string">&quot;22bc0d6b-e16f-4959-9f37-b6ebcb7b2f76&quot;</span>
<span class="token key property">admin-token</span> <span class="token punctuation">=</span> <span class="token string">&quot;c51788e7-1203-4957-b342-7ead5a4919b4&quot;</span>

<span class="token punctuation">[</span><span class="token table class-name">backends.default</span><span class="token punctuation">]</span> <span class="token comment"># \u6307\u5B9A\u97F3\u9891\u540E\u7AEF\uFF0C\u8FD9\u91CC\u6211\u4EEC\u4F7F\u7528\u6587\u4EF6\u540E\u7AEF</span>
<span class="token key property">enable</span> <span class="token punctuation">=</span> <span class="token boolean">true</span>
<span class="token key property">type</span> <span class="token punctuation">=</span> <span class="token string">&quot;file&quot;</span>
<span class="token key property">root</span> <span class="token punctuation">=</span> <span class="token string">&quot;/library&quot;</span>
<span class="token key property">strict</span> <span class="token punctuation">=</span> <span class="token boolean">true</span>
<span class="token key property">layers</span> <span class="token punctuation">=</span> <span class="token number">2</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>\u914D\u7F6E\u6587\u4EF6\u4FEE\u6539\u540E\u9700\u8981\u91CD\u542F Docker \u5BB9\u5668\u3002</p><h2 id="\u90E8\u7F72-anniv" tabindex="-1"><a class="header-anchor" href="#\u90E8\u7F72-anniv" aria-hidden="true">#</a> \u90E8\u7F72 anniv</h2><p>\u6211\u4EEC\u540C\u6837\u63A8\u8350\u4F7F\u7528 Docker \u90E8\u7F72 anniv \uFF0C\u53C2\u8003\u7684 <code>docker-compose.yml</code> \u5982\u4E0B\uFF1A</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&quot;3&quot;</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">anniv</span><span class="token punctuation">:</span>
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> anniv
    <span class="token key atrule">image</span><span class="token punctuation">:</span> ghcr.io/projectanni/anniv<span class="token punctuation">-</span>go<span class="token punctuation">:</span>latest
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 8080<span class="token punctuation">:</span>80/tcp <span class="token comment"># \u53EF\u5C06 8080 \u4FEE\u6539\u4E3A\u5176\u4ED6\u7AEF\u53E3</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ./config<span class="token punctuation">:</span>/app/config
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> CONF=/app/config/config.yml
      <span class="token punctuation">-</span> DB_VENDOR=postgres
      <span class="token punctuation">-</span> DB_PATH=postgres<span class="token punctuation">:</span>//anni<span class="token punctuation">:</span>changetoyourdbpasswd@db<span class="token punctuation">:</span>5432/anniv <span class="token comment"># \u4FEE\u6539\u6570\u636E\u5E93\u5BC6\u7801</span>
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> db
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> unless<span class="token punctuation">-</span>stopped
  <span class="token key atrule">db</span><span class="token punctuation">:</span>
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> anniv<span class="token punctuation">-</span>postgres
    <span class="token key atrule">image</span><span class="token punctuation">:</span> postgres<span class="token punctuation">:</span><span class="token number">14.2</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> POSTGRES_USER=anni
      <span class="token punctuation">-</span> POSTGRES_PASSWORD=changetoyourdbpasswd <span class="token comment"># \u4FEE\u6539\u6570\u636E\u5E93\u5BC6\u7801</span>
      <span class="token punctuation">-</span> POSTGRES_DB=anniv
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ./db<span class="token punctuation">-</span>data<span class="token punctuation">:</span>/var/lib/postgresql/data
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> unless<span class="token punctuation">-</span>stopped
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>\u7B2C\u4E00\u6B21\u542F\u52A8\u540E\uFF0C\u6211\u4EEC\u540C\u6837\u9700\u8981\u4FEE\u6539 <code>anniv</code> \u7684\u914D\u7F6E\u6587\u4EF6(<code>config/config.yml</code>)\uFF1A</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">site_name</span><span class="token punctuation">:</span> Project Anni
<span class="token key atrule">description</span><span class="token punctuation">:</span> Project Anni Production Site
<span class="token key atrule">listen</span><span class="token punctuation">:</span> 0.0.0.0<span class="token punctuation">:</span><span class="token number">80</span>
<span class="token key atrule">enforce_2fa</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
<span class="token key atrule">headers</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token key atrule">trusted_proxies</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> 127.0.0.1/32
<span class="token key atrule">repo_url</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//github.com/ProjectAnni/repo.git <span class="token comment"># \u4FEE\u6539\u4E3A\u81EA\u5DF1\u7684\u5143\u6570\u636E\u4ED3\u5E93\u5730\u5740</span>
<span class="token key atrule">require_invite</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># \u6CE8\u518C\u662F\u5426\u9700\u8981\u9080\u8BF7\u7801</span>
<span class="token key atrule">invite_code</span><span class="token punctuation">:</span> xxxxxx <span class="token comment"># \u9080\u8BF7\u7801</span>
<span class="token key atrule">annil_token</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># \u4E3A\u6BCF\u4E2A\u7528\u6237\u9ED8\u8BA4\u914D\u7F6E\u7684\u97F3\u9891\u4ED3\u5E93</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> Default token
    <span class="token key atrule">url</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//xxxxxx <span class="token comment"># \u4FEE\u6539\u4E3A\u81EA\u5DF1 annil \u7684 URL</span>
    <span class="token key atrule">allow_share</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># \u662F\u5426\u4E3A\u8FD9\u4E2A\u97F3\u9891\u4ED3\u5E93\u542F\u7528\u5206\u4EAB\u529F\u80FD</span>
    <span class="token key atrule">credential</span><span class="token punctuation">:</span> xxxx <span class="token comment"># \u4FEE\u6539\u4E3A annil \u914D\u7F6E\u6587\u4EF6\u4E2D\u7684 admin-token</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>\u914D\u7F6E\u6587\u4EF6\u4FEE\u6539\u540E\u9700\u8981\u91CD\u542F Docker \u5BB9\u5668\u3002</p><h2 id="\u5F00\u59CB\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#\u5F00\u59CB\u4F7F\u7528" aria-hidden="true">#</a> \u5F00\u59CB\u4F7F\u7528</h2><p>\u90E8\u7F72\u5B8C annil \u4E0E anniv \u4E4B\u540E\uFF0C\u5C31\u53EF\u4EE5\u6253\u5F00\u5BA2\u6237\u7AEF\u5E76\u5F00\u59CB\u4F7F\u7528\u4E86\u3002Anni \u5F53\u524D\u6709\u4E24\u4E2A\u5BA2\u6237\u7AEF\uFF1A</p>`,14),w=n("li",null,"\u57FA\u4E8E\u7F51\u9875\u7684 anniw \u5BA2\u6237\u7AEF\uFF0C\u76F4\u63A5\u4F7F\u7528\u6D4F\u89C8\u5668\u8BBF\u95EE anniv \u7684 URL \u5373\u53EF\u5F00\u59CB\u4F7F\u7528",-1),B=s("\u57FA\u4E8E Flutter \u7684 annix \u5BA2\u6237\u7AEF\uFF0C\u53EF\u5728 "),G={href:"https://github.com/ProjectAnni/annix/releases/tag/canary",target:"_blank",rel:"noopener noreferrer"},N=s("Release"),O=s(" \u4E2D\u4E0B\u8F7D\u5BF9\u5E94\u7248\u672C\uFF0C\u5E76\u586B\u5199 anniv URL \u5F00\u59CB\u4F7F\u7528"),T=n("p",null,"\u867D\u7136 Anni \u5DF2\u7ECF\u53EF\u4EE5\u6B63\u5E38\u5DE5\u4F5C\u4E86\uFF0C\u4F46\u5F53\u524D\u97F3\u9891\u4ED3\u5E93\u4E2D\u5E76\u6CA1\u6709\u4EFB\u4F55\u4E13\u8F91\u3002\u8981\u4E86\u89E3\u5982\u4F55\u5411 Anni \u4E2D\u6DFB\u52A0\u4E13\u8F91\uFF0C\u8BF7\u9605\u8BFB\u4E0B\u4E00\u7AE0\u3002",-1);function F(V,U){const t=p("RouterLink"),e=p("ExternalLinkIcon");return o(),c(r,null,[b,n("div",m,[d,n("p",null,[y,a(t,{to:"/guide/intro.html"},{default:l(()=>[_]),_:1}),h])]),g,v,n("p",null,[f,n("a",x,[q,a(e)]),A,P,R]),n("p",null,[S,n("a",D,[j,a(e)]),E]),L,n("ul",null,[w,n("li",null,[B,n("a",G,[N,a(e)]),O])]),T],64)}var H=i(k,[["render",F]]);export{H as default};
